{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nvar _require = require(\"../doc-utils.js\"),\n  chunkBy = _require.chunkBy,\n  last = _require.last,\n  isParagraphStart = _require.isParagraphStart,\n  isModule = _require.isModule,\n  isParagraphEnd = _require.isParagraphEnd,\n  isContent = _require.isContent,\n  startsWith = _require.startsWith,\n  isTagEnd = _require.isTagEnd,\n  isTagStart = _require.isTagStart,\n  getSingleAttribute = _require.getSingleAttribute,\n  setSingleAttribute = _require.setSingleAttribute;\nvar filetypes = require(\"../filetypes.js\");\nvar wrapper = require(\"../module-wrapper.js\");\nvar moduleName = \"loop\";\nfunction hasContent(parts) {\n  return parts.some(function (part) {\n    return isContent(part);\n  });\n}\nfunction getFirstMeaningFulPart(parsed) {\n  for (var i = 0, len = parsed.length; i < len; i++) {\n    if (parsed[i].type !== \"content\") {\n      return parsed[i];\n    }\n  }\n  return null;\n}\nfunction isInsideParagraphLoop(part) {\n  var firstMeaningfulPart = getFirstMeaningFulPart(part.subparsed);\n  return firstMeaningfulPart != null && firstMeaningfulPart.tag !== \"w:t\";\n}\nfunction getPageBreakIfApplies(part) {\n  return part.hasPageBreak && isInsideParagraphLoop(part) ? '<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>' : \"\";\n}\nfunction isEnclosedByParagraphs(parsed) {\n  return parsed.length && isParagraphStart(parsed[0]) && isParagraphEnd(last(parsed));\n}\nfunction getOffset(chunk) {\n  return hasContent(chunk) ? 0 : chunk.length;\n}\nfunction addPageBreakAtEnd(subRendered) {\n  var j = subRendered.parts.length - 1;\n  if (subRendered.parts[j] === \"</w:p>\") {\n    subRendered.parts.splice(j, 0, '<w:r><w:br w:type=\"page\"/></w:r>');\n  } else {\n    subRendered.parts.push('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n  }\n}\nfunction addPageBreakAtBeginning(subRendered) {\n  subRendered.parts.unshift('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n}\nfunction isContinuous(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf(\"continuous\") !== -1;\n  });\n}\nfunction isNextPage(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf('w:val=\"nextPage\"') !== -1;\n  });\n}\nfunction addSectionBefore(parts, sect) {\n  return [\"<w:p><w:pPr>\".concat(sect.map(function (_ref) {\n    var value = _ref.value;\n    return value;\n  }).join(\"\"), \"</w:pPr></w:p>\")].concat(parts);\n}\nfunction addContinuousType(parts) {\n  var stop = false;\n  var inSectPr = false;\n  return parts.reduce(function (result, part) {\n    if (stop === false && startsWith(part, \"<w:sectPr\")) {\n      inSectPr = true;\n    }\n    if (inSectPr) {\n      if (startsWith(part, \"<w:type\")) {\n        stop = true;\n      }\n      if (stop === false && startsWith(part, \"</w:sectPr\")) {\n        result.push('<w:type w:val=\"continuous\"/>');\n      }\n    }\n    result.push(part);\n    return result;\n  }, []);\n}\nfunction dropHeaderFooterRefs(parts) {\n  return parts.filter(function (text) {\n    return !startsWith(text, \"<w:headerReference\") && !startsWith(text, \"<w:footerReference\");\n  });\n}\nfunction hasPageBreak(chunk) {\n  return chunk.some(function (part) {\n    return part.tag === \"w:br\" && part.value.indexOf('w:type=\"page\"') !== -1;\n  });\n}\nfunction hasImage(chunk) {\n  return chunk.some(function (_ref2) {\n    var tag = _ref2.tag;\n    return tag === \"w:drawing\";\n  });\n}\nfunction getSectPr(chunks) {\n  var collectSectPr = false;\n  var sectPrs = [];\n  chunks.forEach(function (part) {\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPrs.push([]);\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      sectPrs[sectPrs.length - 1].push(part);\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  });\n  return sectPrs;\n}\nfunction getSectPrHeaderFooterChangeCount(chunks) {\n  var collectSectPr = false;\n  var sectPrCount = 0;\n  chunks.forEach(function (part) {\n    if (isTagStart(\"w:sectPr\", part)) {\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      if (part.tag === \"w:headerReference\" || part.tag === \"w:footerReference\") {\n        sectPrCount++;\n        collectSectPr = false;\n      }\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  });\n  return sectPrCount;\n}\nfunction getLastSectPr(parsed) {\n  var sectPr = [];\n  var inSectPr = false;\n  for (var i = parsed.length - 1; i >= 0; i--) {\n    var part = parsed[i];\n    if (isTagEnd(\"w:sectPr\", part)) {\n      inSectPr = true;\n    }\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPr.unshift(part.value);\n      inSectPr = false;\n    }\n    if (inSectPr) {\n      sectPr.unshift(part.value);\n    }\n    if (isParagraphStart(part)) {\n      if (sectPr.length > 0) {\n        return sectPr.join(\"\");\n      }\n      break;\n    }\n  }\n  return \"\";\n}\nvar LoopModule = /*#__PURE__*/function () {\n  function LoopModule() {\n    _classCallCheck(this, LoopModule);\n    this.name = \"LoopModule\";\n    this.inXfrm = false;\n    this.totalSectPr = 0;\n    this.prefix = {\n      start: \"#\",\n      end: \"/\",\n      dash: /^-([^\\s]+)\\s(.+)/,\n      inverted: \"^\"\n    };\n  }\n  _createClass(LoopModule, [{\n    key: \"optionsTransformer\",\n    value: function optionsTransformer(opts, docxtemplater) {\n      this.docxtemplater = docxtemplater;\n      return opts;\n    }\n  }, {\n    key: \"preparse\",\n    value: function preparse(parsed, _ref3) {\n      var contentType = _ref3.contentType;\n      if (filetypes.main.indexOf(contentType) !== -1) {\n        this.sects = getSectPr(parsed);\n      }\n    }\n  }, {\n    key: \"matchers\",\n    value: function matchers() {\n      var module = moduleName;\n      return [[this.prefix.start, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: false\n      }], [this.prefix.inverted, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: true\n      }], [this.prefix.end, module, {\n        location: \"end\"\n      }], [this.prefix.dash, module, function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 3),\n          expandTo = _ref5[1],\n          value = _ref5[2];\n        return {\n          location: \"start\",\n          inverted: false,\n          expandTo: expandTo,\n          value: value\n        };\n      }]];\n    }\n  }, {\n    key: \"getTraits\",\n    value: function getTraits(traitName, parsed) {\n      // Stryker disable all : because getTraits should disappear in v4\n      if (traitName !== \"expandPair\") {\n        return;\n      }\n      // Stryker restore all\n\n      return parsed.reduce(function (tags, part, offset) {\n        if (isModule(part, moduleName) && part.subparsed == null) {\n          tags.push({\n            part: part,\n            offset: offset\n          });\n        }\n        return tags;\n      }, []);\n    }\n  }, {\n    key: \"postparse\",\n    value: function postparse(parsed, _ref6) {\n      var basePart = _ref6.basePart;\n      if (basePart && this.docxtemplater.fileType === \"docx\" && parsed.length > 0) {\n        basePart.sectPrCount = getSectPrHeaderFooterChangeCount(parsed);\n        this.totalSectPr += basePart.sectPrCount;\n        var sects = this.sects;\n        sects.some(function (sect, index) {\n          if (basePart.lIndex < sect[0].lIndex) {\n            if (index + 1 < sects.length && isContinuous(sects[index + 1])) {\n              basePart.addContinuousType = true;\n            }\n            return true;\n          }\n          if (parsed[0].lIndex < sect[0].lIndex && sect[0].lIndex < basePart.lIndex) {\n            if (isNextPage(sects[index])) {\n              basePart.addNextPage = {\n                index: index\n              };\n            }\n            return true;\n          }\n        });\n        basePart.lastParagrapSectPr = getLastSectPr(parsed);\n      }\n      if (!basePart || basePart.expandTo !== \"auto\" || basePart.module !== moduleName || !isEnclosedByParagraphs(parsed)) {\n        return parsed;\n      }\n      basePart.paragraphLoop = true;\n      var level = 0;\n      var chunks = chunkBy(parsed, function (p) {\n        if (isParagraphStart(p)) {\n          level++;\n          if (level === 1) {\n            return \"start\";\n          }\n        }\n        if (isParagraphEnd(p)) {\n          level--;\n          if (level === 0) {\n            return \"end\";\n          }\n        }\n        return null;\n      });\n      var firstChunk = chunks[0];\n      var lastChunk = last(chunks);\n      var firstOffset = getOffset(firstChunk);\n      var lastOffset = getOffset(lastChunk);\n      basePart.hasPageBreakBeginning = hasPageBreak(firstChunk);\n      basePart.hasPageBreak = hasPageBreak(lastChunk);\n      if (hasImage(firstChunk)) {\n        firstOffset = 0;\n      }\n      if (hasImage(lastChunk)) {\n        lastOffset = 0;\n      }\n      return parsed.slice(firstOffset, parsed.length - lastOffset);\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(part, options) {\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var sm = options.scopeManager;\n      var promisedValue = sm.getValueAsync(part.value, {\n        part: part\n      });\n      var promises = [];\n      function loopOver(scope, i, length) {\n        var scopeManager = sm.createSubScopeManager(scope, part.value, i, part, length);\n        promises.push(options.resolve({\n          filePath: options.filePath,\n          modules: options.modules,\n          baseNullGetter: options.baseNullGetter,\n          resolve: options.resolve,\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        }));\n      }\n      var errorList = [];\n      return promisedValue.then(function (values) {\n        return new Promise(function (resolve) {\n          if (values instanceof Array) {\n            Promise.all(values).then(resolve);\n          } else {\n            resolve(values);\n          }\n        }).then(function (values) {\n          sm.loopOverValue(values, loopOver, part.inverted);\n          return Promise.all(promises).then(function (r) {\n            return r.map(function (_ref7) {\n              var resolved = _ref7.resolved,\n                errors = _ref7.errors;\n              errorList.push.apply(errorList, _toConsumableArray(errors));\n              return resolved;\n            });\n          }).then(function (value) {\n            if (errorList.length > 0) {\n              throw errorList;\n            }\n            return value;\n          });\n        });\n      });\n    }\n    // eslint-disable-next-line complexity\n  }, {\n    key: \"render\",\n    value: function render(part, options) {\n      if (part.tag === \"p:xfrm\") {\n        this.inXfrm = part.position === \"start\";\n      }\n      if (part.tag === \"a:ext\" && this.inXfrm) {\n        this.lastExt = part;\n        return part;\n      }\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var totalValue = [];\n      var errors = [];\n      var heightOffset = 0;\n      var self = this;\n      var firstTag = part.subparsed[0];\n      var tagHeight = 0;\n      if ((firstTag === null || firstTag === void 0 ? void 0 : firstTag.tag) === \"a:tr\") {\n        tagHeight = +getSingleAttribute(firstTag.value, \"h\");\n      }\n      heightOffset -= tagHeight;\n      var a16RowIdOffset = 0;\n      var insideParagraphLoop = isInsideParagraphLoop(part);\n\n      // eslint-disable-next-line complexity\n      function loopOver(scope, i, length) {\n        heightOffset += tagHeight;\n        var scopeManager = options.scopeManager.createSubScopeManager(scope, part.value, i, part, length);\n        part.subparsed.forEach(function (pp) {\n          if (isTagStart(\"a16:rowId\", pp)) {\n            var val = +getSingleAttribute(pp.value, \"val\") + a16RowIdOffset;\n            a16RowIdOffset = 1;\n            pp.value = setSingleAttribute(pp.value, \"val\", val);\n          }\n        });\n        var subRendered = options.render(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        }));\n        if (part.hasPageBreak && i === length - 1 && insideParagraphLoop) {\n          addPageBreakAtEnd(subRendered);\n        }\n        var isNotFirst = scopeManager.scopePathItem.some(function (i) {\n          return i !== 0;\n        });\n        if (isNotFirst) {\n          if (part.sectPrCount === 1) {\n            subRendered.parts = dropHeaderFooterRefs(subRendered.parts);\n          }\n          if (part.addContinuousType) {\n            subRendered.parts = addContinuousType(subRendered.parts);\n          }\n        } else if (part.addNextPage) {\n          subRendered.parts = addSectionBefore(subRendered.parts, self.sects[part.addNextPage.index]);\n        }\n        if (part.addNextPage) {\n          addPageBreakAtEnd(subRendered);\n        }\n        if (part.hasPageBreakBeginning && insideParagraphLoop) {\n          addPageBreakAtBeginning(subRendered);\n        }\n        for (var _i2 = 0, len = subRendered.parts.length; _i2 < len; _i2++) {\n          totalValue.push(subRendered.parts[_i2]);\n        }\n        Array.prototype.push.apply(errors, subRendered.errors);\n      }\n      var result = options.scopeManager.loopOver(part.value, loopOver, part.inverted, {\n        part: part\n      });\n      // if the loop is showing empty content\n      if (result === false) {\n        if (part.lastParagrapSectPr) {\n          if (part.paragraphLoop) {\n            return {\n              value: \"<w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr></w:p>\")\n            };\n          }\n          return {\n            value: \"</w:t></w:r></w:p><w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr><w:r><w:t>\")\n          };\n        }\n        return {\n          value: getPageBreakIfApplies(part) || \"\",\n          errors: errors\n        };\n      }\n      if (heightOffset !== 0) {\n        var cy = +getSingleAttribute(this.lastExt.value, \"cy\");\n        this.lastExt.value = setSingleAttribute(this.lastExt.value, \"cy\", cy + heightOffset);\n      }\n      return {\n        value: options.joinUncorrupt(totalValue, _objectSpread(_objectSpread({}, options), {}, {\n          basePart: part\n        })),\n        errors: errors\n      };\n    }\n  }]);\n  return LoopModule;\n}();\nmodule.exports = function () {\n  return wrapper(new LoopModule());\n};","map":{"version":3,"names":["require","_typeof","obj","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","iter","Array","from","isArray","_arrayLikeToArray","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","o","minLen","n","toString","call","slice","name","test","len","arr2","_i","_s","_e","_x","_r","_arr","_n","_d","next","done","err","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","_require","chunkBy","last","isParagraphStart","isModule","isParagraphEnd","isContent","startsWith","isTagEnd","isTagStart","getSingleAttribute","setSingleAttribute","filetypes","wrapper","moduleName","hasContent","parts","some","part","getFirstMeaningFulPart","parsed","type","isInsideParagraphLoop","firstMeaningfulPart","subparsed","tag","getPageBreakIfApplies","hasPageBreak","isEnclosedByParagraphs","getOffset","chunk","addPageBreakAtEnd","subRendered","j","splice","addPageBreakAtBeginning","unshift","isContinuous","indexOf","isNextPage","addSectionBefore","sect","concat","map","_ref","join","addContinuousType","stop","inSectPr","reduce","result","dropHeaderFooterRefs","text","hasImage","_ref2","getSectPr","chunks","collectSectPr","sectPrs","getSectPrHeaderFooterChangeCount","sectPrCount","getLastSectPr","sectPr","LoopModule","inXfrm","totalSectPr","prefix","start","end","dash","inverted","optionsTransformer","opts","docxtemplater","preparse","_ref3","contentType","main","sects","matchers","module","expandTo","location","_ref4","_ref5","getTraits","traitName","tags","offset","postparse","_ref6","basePart","fileType","index","lIndex","addNextPage","lastParagrapSectPr","paragraphLoop","level","p","firstChunk","lastChunk","firstOffset","lastOffset","hasPageBreakBeginning","resolve","options","sm","scopeManager","promisedValue","getValueAsync","promises","loopOver","scope","createSubScopeManager","filePath","modules","baseNullGetter","compiled","errorList","then","values","Promise","all","loopOverValue","r","_ref7","resolved","errors","render","position","lastExt","totalValue","heightOffset","self","firstTag","tagHeight","a16RowIdOffset","insideParagraphLoop","pp","val","isNotFirst","scopePathItem","_i2","cy","joinUncorrupt","exports"],"sources":["/Users/hardpro/Desktop/Vue JS/aics-attend/client/node_modules/docxtemplater/js/modules/loop.js"],"sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0); } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar _require = require(\"../doc-utils.js\"),\n  chunkBy = _require.chunkBy,\n  last = _require.last,\n  isParagraphStart = _require.isParagraphStart,\n  isModule = _require.isModule,\n  isParagraphEnd = _require.isParagraphEnd,\n  isContent = _require.isContent,\n  startsWith = _require.startsWith,\n  isTagEnd = _require.isTagEnd,\n  isTagStart = _require.isTagStart,\n  getSingleAttribute = _require.getSingleAttribute,\n  setSingleAttribute = _require.setSingleAttribute;\nvar filetypes = require(\"../filetypes.js\");\nvar wrapper = require(\"../module-wrapper.js\");\nvar moduleName = \"loop\";\nfunction hasContent(parts) {\n  return parts.some(function (part) {\n    return isContent(part);\n  });\n}\nfunction getFirstMeaningFulPart(parsed) {\n  for (var i = 0, len = parsed.length; i < len; i++) {\n    if (parsed[i].type !== \"content\") {\n      return parsed[i];\n    }\n  }\n  return null;\n}\nfunction isInsideParagraphLoop(part) {\n  var firstMeaningfulPart = getFirstMeaningFulPart(part.subparsed);\n  return firstMeaningfulPart != null && firstMeaningfulPart.tag !== \"w:t\";\n}\nfunction getPageBreakIfApplies(part) {\n  return part.hasPageBreak && isInsideParagraphLoop(part) ? '<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>' : \"\";\n}\nfunction isEnclosedByParagraphs(parsed) {\n  return parsed.length && isParagraphStart(parsed[0]) && isParagraphEnd(last(parsed));\n}\nfunction getOffset(chunk) {\n  return hasContent(chunk) ? 0 : chunk.length;\n}\nfunction addPageBreakAtEnd(subRendered) {\n  var j = subRendered.parts.length - 1;\n  if (subRendered.parts[j] === \"</w:p>\") {\n    subRendered.parts.splice(j, 0, '<w:r><w:br w:type=\"page\"/></w:r>');\n  } else {\n    subRendered.parts.push('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n  }\n}\nfunction addPageBreakAtBeginning(subRendered) {\n  subRendered.parts.unshift('<w:p><w:r><w:br w:type=\"page\"/></w:r></w:p>');\n}\nfunction isContinuous(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf(\"continuous\") !== -1;\n  });\n}\nfunction isNextPage(parts) {\n  return parts.some(function (part) {\n    return isTagStart(\"w:type\", part) && part.value.indexOf('w:val=\"nextPage\"') !== -1;\n  });\n}\nfunction addSectionBefore(parts, sect) {\n  return [\"<w:p><w:pPr>\".concat(sect.map(function (_ref) {\n    var value = _ref.value;\n    return value;\n  }).join(\"\"), \"</w:pPr></w:p>\")].concat(parts);\n}\nfunction addContinuousType(parts) {\n  var stop = false;\n  var inSectPr = false;\n  return parts.reduce(function (result, part) {\n    if (stop === false && startsWith(part, \"<w:sectPr\")) {\n      inSectPr = true;\n    }\n    if (inSectPr) {\n      if (startsWith(part, \"<w:type\")) {\n        stop = true;\n      }\n      if (stop === false && startsWith(part, \"</w:sectPr\")) {\n        result.push('<w:type w:val=\"continuous\"/>');\n      }\n    }\n    result.push(part);\n    return result;\n  }, []);\n}\nfunction dropHeaderFooterRefs(parts) {\n  return parts.filter(function (text) {\n    return !startsWith(text, \"<w:headerReference\") && !startsWith(text, \"<w:footerReference\");\n  });\n}\nfunction hasPageBreak(chunk) {\n  return chunk.some(function (part) {\n    return part.tag === \"w:br\" && part.value.indexOf('w:type=\"page\"') !== -1;\n  });\n}\nfunction hasImage(chunk) {\n  return chunk.some(function (_ref2) {\n    var tag = _ref2.tag;\n    return tag === \"w:drawing\";\n  });\n}\nfunction getSectPr(chunks) {\n  var collectSectPr = false;\n  var sectPrs = [];\n  chunks.forEach(function (part) {\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPrs.push([]);\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      sectPrs[sectPrs.length - 1].push(part);\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  });\n  return sectPrs;\n}\nfunction getSectPrHeaderFooterChangeCount(chunks) {\n  var collectSectPr = false;\n  var sectPrCount = 0;\n  chunks.forEach(function (part) {\n    if (isTagStart(\"w:sectPr\", part)) {\n      collectSectPr = true;\n    }\n    if (collectSectPr) {\n      if (part.tag === \"w:headerReference\" || part.tag === \"w:footerReference\") {\n        sectPrCount++;\n        collectSectPr = false;\n      }\n    }\n    if (isTagEnd(\"w:sectPr\", part)) {\n      collectSectPr = false;\n    }\n  });\n  return sectPrCount;\n}\nfunction getLastSectPr(parsed) {\n  var sectPr = [];\n  var inSectPr = false;\n  for (var i = parsed.length - 1; i >= 0; i--) {\n    var part = parsed[i];\n    if (isTagEnd(\"w:sectPr\", part)) {\n      inSectPr = true;\n    }\n    if (isTagStart(\"w:sectPr\", part)) {\n      sectPr.unshift(part.value);\n      inSectPr = false;\n    }\n    if (inSectPr) {\n      sectPr.unshift(part.value);\n    }\n    if (isParagraphStart(part)) {\n      if (sectPr.length > 0) {\n        return sectPr.join(\"\");\n      }\n      break;\n    }\n  }\n  return \"\";\n}\nvar LoopModule = /*#__PURE__*/function () {\n  function LoopModule() {\n    _classCallCheck(this, LoopModule);\n    this.name = \"LoopModule\";\n    this.inXfrm = false;\n    this.totalSectPr = 0;\n    this.prefix = {\n      start: \"#\",\n      end: \"/\",\n      dash: /^-([^\\s]+)\\s(.+)/,\n      inverted: \"^\"\n    };\n  }\n  _createClass(LoopModule, [{\n    key: \"optionsTransformer\",\n    value: function optionsTransformer(opts, docxtemplater) {\n      this.docxtemplater = docxtemplater;\n      return opts;\n    }\n  }, {\n    key: \"preparse\",\n    value: function preparse(parsed, _ref3) {\n      var contentType = _ref3.contentType;\n      if (filetypes.main.indexOf(contentType) !== -1) {\n        this.sects = getSectPr(parsed);\n      }\n    }\n  }, {\n    key: \"matchers\",\n    value: function matchers() {\n      var module = moduleName;\n      return [[this.prefix.start, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: false\n      }], [this.prefix.inverted, module, {\n        expandTo: \"auto\",\n        location: \"start\",\n        inverted: true\n      }], [this.prefix.end, module, {\n        location: \"end\"\n      }], [this.prefix.dash, module, function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 3),\n          expandTo = _ref5[1],\n          value = _ref5[2];\n        return {\n          location: \"start\",\n          inverted: false,\n          expandTo: expandTo,\n          value: value\n        };\n      }]];\n    }\n  }, {\n    key: \"getTraits\",\n    value: function getTraits(traitName, parsed) {\n      // Stryker disable all : because getTraits should disappear in v4\n      if (traitName !== \"expandPair\") {\n        return;\n      }\n      // Stryker restore all\n\n      return parsed.reduce(function (tags, part, offset) {\n        if (isModule(part, moduleName) && part.subparsed == null) {\n          tags.push({\n            part: part,\n            offset: offset\n          });\n        }\n        return tags;\n      }, []);\n    }\n  }, {\n    key: \"postparse\",\n    value: function postparse(parsed, _ref6) {\n      var basePart = _ref6.basePart;\n      if (basePart && this.docxtemplater.fileType === \"docx\" && parsed.length > 0) {\n        basePart.sectPrCount = getSectPrHeaderFooterChangeCount(parsed);\n        this.totalSectPr += basePart.sectPrCount;\n        var sects = this.sects;\n        sects.some(function (sect, index) {\n          if (basePart.lIndex < sect[0].lIndex) {\n            if (index + 1 < sects.length && isContinuous(sects[index + 1])) {\n              basePart.addContinuousType = true;\n            }\n            return true;\n          }\n          if (parsed[0].lIndex < sect[0].lIndex && sect[0].lIndex < basePart.lIndex) {\n            if (isNextPage(sects[index])) {\n              basePart.addNextPage = {\n                index: index\n              };\n            }\n            return true;\n          }\n        });\n        basePart.lastParagrapSectPr = getLastSectPr(parsed);\n      }\n      if (!basePart || basePart.expandTo !== \"auto\" || basePart.module !== moduleName || !isEnclosedByParagraphs(parsed)) {\n        return parsed;\n      }\n      basePart.paragraphLoop = true;\n      var level = 0;\n      var chunks = chunkBy(parsed, function (p) {\n        if (isParagraphStart(p)) {\n          level++;\n          if (level === 1) {\n            return \"start\";\n          }\n        }\n        if (isParagraphEnd(p)) {\n          level--;\n          if (level === 0) {\n            return \"end\";\n          }\n        }\n        return null;\n      });\n      var firstChunk = chunks[0];\n      var lastChunk = last(chunks);\n      var firstOffset = getOffset(firstChunk);\n      var lastOffset = getOffset(lastChunk);\n      basePart.hasPageBreakBeginning = hasPageBreak(firstChunk);\n      basePart.hasPageBreak = hasPageBreak(lastChunk);\n      if (hasImage(firstChunk)) {\n        firstOffset = 0;\n      }\n      if (hasImage(lastChunk)) {\n        lastOffset = 0;\n      }\n      return parsed.slice(firstOffset, parsed.length - lastOffset);\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(part, options) {\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var sm = options.scopeManager;\n      var promisedValue = sm.getValueAsync(part.value, {\n        part: part\n      });\n      var promises = [];\n      function loopOver(scope, i, length) {\n        var scopeManager = sm.createSubScopeManager(scope, part.value, i, part, length);\n        promises.push(options.resolve({\n          filePath: options.filePath,\n          modules: options.modules,\n          baseNullGetter: options.baseNullGetter,\n          resolve: options.resolve,\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        }));\n      }\n      var errorList = [];\n      return promisedValue.then(function (values) {\n        return new Promise(function (resolve) {\n          if (values instanceof Array) {\n            Promise.all(values).then(resolve);\n          } else {\n            resolve(values);\n          }\n        }).then(function (values) {\n          sm.loopOverValue(values, loopOver, part.inverted);\n          return Promise.all(promises).then(function (r) {\n            return r.map(function (_ref7) {\n              var resolved = _ref7.resolved,\n                errors = _ref7.errors;\n              errorList.push.apply(errorList, _toConsumableArray(errors));\n              return resolved;\n            });\n          }).then(function (value) {\n            if (errorList.length > 0) {\n              throw errorList;\n            }\n            return value;\n          });\n        });\n      });\n    }\n    // eslint-disable-next-line complexity\n  }, {\n    key: \"render\",\n    value: function render(part, options) {\n      if (part.tag === \"p:xfrm\") {\n        this.inXfrm = part.position === \"start\";\n      }\n      if (part.tag === \"a:ext\" && this.inXfrm) {\n        this.lastExt = part;\n        return part;\n      }\n      if (!isModule(part, moduleName)) {\n        return null;\n      }\n      var totalValue = [];\n      var errors = [];\n      var heightOffset = 0;\n      var self = this;\n      var firstTag = part.subparsed[0];\n      var tagHeight = 0;\n      if ((firstTag === null || firstTag === void 0 ? void 0 : firstTag.tag) === \"a:tr\") {\n        tagHeight = +getSingleAttribute(firstTag.value, \"h\");\n      }\n      heightOffset -= tagHeight;\n      var a16RowIdOffset = 0;\n      var insideParagraphLoop = isInsideParagraphLoop(part);\n\n      // eslint-disable-next-line complexity\n      function loopOver(scope, i, length) {\n        heightOffset += tagHeight;\n        var scopeManager = options.scopeManager.createSubScopeManager(scope, part.value, i, part, length);\n        part.subparsed.forEach(function (pp) {\n          if (isTagStart(\"a16:rowId\", pp)) {\n            var val = +getSingleAttribute(pp.value, \"val\") + a16RowIdOffset;\n            a16RowIdOffset = 1;\n            pp.value = setSingleAttribute(pp.value, \"val\", val);\n          }\n        });\n        var subRendered = options.render(_objectSpread(_objectSpread({}, options), {}, {\n          compiled: part.subparsed,\n          tags: {},\n          scopeManager: scopeManager\n        }));\n        if (part.hasPageBreak && i === length - 1 && insideParagraphLoop) {\n          addPageBreakAtEnd(subRendered);\n        }\n        var isNotFirst = scopeManager.scopePathItem.some(function (i) {\n          return i !== 0;\n        });\n        if (isNotFirst) {\n          if (part.sectPrCount === 1) {\n            subRendered.parts = dropHeaderFooterRefs(subRendered.parts);\n          }\n          if (part.addContinuousType) {\n            subRendered.parts = addContinuousType(subRendered.parts);\n          }\n        } else if (part.addNextPage) {\n          subRendered.parts = addSectionBefore(subRendered.parts, self.sects[part.addNextPage.index]);\n        }\n        if (part.addNextPage) {\n          addPageBreakAtEnd(subRendered);\n        }\n        if (part.hasPageBreakBeginning && insideParagraphLoop) {\n          addPageBreakAtBeginning(subRendered);\n        }\n        for (var _i2 = 0, len = subRendered.parts.length; _i2 < len; _i2++) {\n          totalValue.push(subRendered.parts[_i2]);\n        }\n        Array.prototype.push.apply(errors, subRendered.errors);\n      }\n      var result = options.scopeManager.loopOver(part.value, loopOver, part.inverted, {\n        part: part\n      });\n      // if the loop is showing empty content\n      if (result === false) {\n        if (part.lastParagrapSectPr) {\n          if (part.paragraphLoop) {\n            return {\n              value: \"<w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr></w:p>\")\n            };\n          }\n          return {\n            value: \"</w:t></w:r></w:p><w:p><w:pPr>\".concat(part.lastParagrapSectPr, \"</w:pPr><w:r><w:t>\")\n          };\n        }\n        return {\n          value: getPageBreakIfApplies(part) || \"\",\n          errors: errors\n        };\n      }\n      if (heightOffset !== 0) {\n        var cy = +getSingleAttribute(this.lastExt.value, \"cy\");\n        this.lastExt.value = setSingleAttribute(this.lastExt.value, \"cy\", cy + heightOffset);\n      }\n      return {\n        value: options.joinUncorrupt(totalValue, _objectSpread(_objectSpread({}, options), {}, {\n          basePart: part\n        })),\n        errors: errors\n      };\n    }\n  }]);\n  return LoopModule;\n}();\nmodule.exports = function () {\n  return wrapper(new LoopModule());\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}