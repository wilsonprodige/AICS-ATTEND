{"ast":null,"code":"import { CountUp } from 'countup.js';\nimport { makeRequest } from '@/axios';\nexport default {\n  name: 'MyRecords',\n  data() {\n    return {\n      count: 0,\n      numrecords: 0,\n      numdays: 0,\n      today: true,\n      myrecords: [],\n      view: [],\n      itemsPerPage: 5,\n      currentPage: 1\n    };\n  },\n  methods: {\n    view_record(record, index) {\n      const info = {\n        ...record\n      };\n      info.ID = index + 1;\n      this.view = info;\n    },\n    clear_modal() {\n      this.view = [];\n    },\n    nextPage() {\n      this.currentPage++;\n    },\n    prevPage() {\n      this.currentPage--;\n    },\n    async fetch_myrecords_animate() {\n      try {\n        const num = await makeRequest.get('/records/myrecords/' + this.get_user_id);\n        //console.log(num.data)\n        const options = {\n          duration: 3,\n          separator: ','\n        };\n        const numRecordsCountUp = new CountUp('numrecords', num.data, this.numrecords, options);\n        numRecordsCountUp.start();\n        this.numrecords = num.data;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async check_present_today() {\n      try {\n        const status = await makeRequest.get('/records/presentToday/' + this.get_user_id);\n        if (status.data.Error) {\n          this.$toast.error(\"could not get presence status\");\n        } else {\n          this.today = status.data;\n        }\n      } catch (error) {\n        console.log(error);\n        this.$toast.error(\"could not check presence status\");\n      }\n    },\n    async get_month_presence() {\n      try {\n        const month = await makeRequest.get('/records/getMonthPresence/' + this.get_user_id);\n        if (month.data.Error) {\n          this.$toast.error(\"could not get monthly presence\");\n        } else {\n          const options = {\n            duration: 3,\n            separator: ','\n          };\n          const numdaysCountUp = new CountUp('numdays', month.data, this.numdays, options);\n          numdaysCountUp.start();\n          this.numdays = month.data;\n        }\n      } catch (error) {\n        console.log(error);\n        this.$toast.error(\"could not get monthly prence status\");\n      }\n    },\n    fetch_my_records() {\n      makeRequest.get('/records/my/' + this.get_user_id).then(result => {\n        if (!result.data.Error) {\n          this.myrecords = result.data;\n          console.log(result.data);\n        } else {\n          this.$toast.error(result.data.Error);\n        }\n      }).catch(error => {\n        console.log(error);\n        this.$toast.error('Something went wrong');\n      });\n    }\n  },\n  mounted() {\n    this.fetch_myrecords_animate();\n    this.check_present_today();\n    this.get_month_presence();\n    this.fetch_my_records();\n    // this.checK_present()\n    // this.count_days_present()\n    // // const options = {\n    // duration: 3, \n    // separator: ',',\n    // };\n    // const numRecordsCountUp = new CountUp('numrecords', this.numrecords,options); \n    // numRecordsCountUp.start(); \n\n    // const numDaysCountUp = new CountUp('numdays',this.numdays,options); \n    // numDaysCountUp.start(); \n  },\n\n  computed: {\n    get_user_id() {\n      return this.$store.state.user_id;\n    },\n    totalPages() {\n      return Math.ceil(this.myrecords.length / this.itemsPerPage);\n    },\n    paginatedRecords() {\n      const startIndex = (this.currentPage - 1) * this.itemsPerPage;\n      const endIndex = startIndex + this.itemsPerPage;\n      return this.myrecords.slice(startIndex, endIndex);\n    }\n  }\n};","map":{"version":3,"names":["CountUp","makeRequest","name","data","count","numrecords","numdays","today","myrecords","view","itemsPerPage","currentPage","methods","view_record","record","index","info","ID","clear_modal","nextPage","prevPage","fetch_myrecords_animate","num","get","get_user_id","options","duration","separator","numRecordsCountUp","start","error","console","log","check_present_today","status","Error","$toast","get_month_presence","month","numdaysCountUp","fetch_my_records","then","result","catch","mounted","computed","$store","state","user_id","totalPages","Math","ceil","length","paginatedRecords","startIndex","endIndex","slice"],"sources":["/Users/hardpro/Desktop/Vue JS/aics-attend/client/src/views/Admin/MyRecords.vue"],"sourcesContent":["<template>\n    <div class=\"container-fluid pt-4 px-4\">\n                <div class=\"row g-4\">\n                    <div class=\"col-sm-12 col-xl-4\">\n                        <div class=\"bg-light rounded d-flex align-items-center justify-content-between p-4\">\n                            <i class=\"fa fa-book fa-3x text-primary\"></i>\n                            <div class=\"ms-3\">\n                                <h4 class=\"mb-2\">Records</h4>\n                                <h3 class=\"mb-0 text-primary\" id=\"numrecords\">{{ numrecords }}</h3>\n                            </div>\n                        </div>\n                        \n                    </div>\n                    <div class=\"col-sm-6 col-xl-4\">\n                        <div class=\"bg-light rounded d-flex align-items-center justify-content-between p-4\">\n                            <i class=\"fa fa-check fa-3x text-primary\"></i>\n                            <div class=\"ms-3\">\n                                <h4 class=\"mb-2\">Monthly Presence</h4>\n                                <h3 class=\"mb-0 text-primary\" id=\"numdays\">{{ numdays }}</h3>\n                            </div>\n                        </div>\n                        \n                    </div>\n                    <div class=\"col-sm-6 col-xl-4\" v-if=\"today\">\n                        <div class=\"bg-light rounded d-flex align-items-center justify-content-between p-4\">\n                            <i class=\"fa fa-check fa-3x text-primary\"></i>\n                            <div class=\"ms-3\">\n                                <h4 class=\"mb-2\">Today</h4>\n                                <h3 class=\"mb-0 text-primary\" id=\"numactive\">you're present</h3>\n                            </div>\n                        </div>\n                        \n                    </div>\n                    <div class=\"col-sm-6 col-xl-4\" v-else>\n                        <div class=\"bg-light rounded d-flex align-items-center justify-content-between p-4\">\n                            <i class=\"fa fa-times fa-3x text-danger\"></i>\n                            <div class=\"ms-3\">\n                                <h4 class=\"mb-2\">Today</h4>\n                                <h4 class=\"mb-0 text-danger\" id=\"numactive\">You're absent</h4>\n                            </div>\n                        </div>\n                        \n                    </div>\n                </div>\n        </div>\n    <div class=\"container-fluid pt-4 px-4\">\n                <div class=\"bg-light text-center rounded p-4 custom-row\">\n                    <div class=\"d-flex align-items-center justify-content-between mb-4 custom\">\n                        <h5 class=\"mb-0\">My Record List</h5>\n\n                        \n                        <!-- <input type=\"email\" class=\"form-control search\" id=\"search\" placeholder=\"Search for a user\"> -->\n                                \n                        <div>\n                            <button class=\"btn btn-primary mx-1\" @click=\"exportPDF\"><i class=\"fa fa-file-pdf\"></i> Export Data</button>\n                        </div>\n                        \n                    </div>\n                    <div class=\"table-responsive\" v-if=\"paginatedRecords\">\n                        <table class=\"table text-center align-middle table-bordered table-hover mb-0\">\n                            <thead>\n                                <tr class=\"text-dark\">\n                                    <th scope=\"col\">Num</th>\n                                    <th scope=\"col\">Date</th>\n                                    <th scope=\"col\">Arrival Time</th>\n                                    <th scope=\"col\">Departure Time</th>\n                                    <th scope=\"col\">Actions</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr v-for=\"(record, index) in paginatedRecords\" :key=\"index\">\n                                    <td>{{ index+1 }}</td>\n                                    <td>{{ record.date }}</td>\n                                    <td>{{ record.arrivalTime }}</td>\n                                    <td>{{ record.departureTime }}</td>\n                                    <td><a class=\"btn btn-sm btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#viewMyRec\" @click=\"view_record(record,index)\">Detail</a></td>\n                                </tr>\n                                \n                            </tbody>\n                        </table>\n                        <!----pagination-->\n                        <nav aria-label=\"...\">\n                                    <ul class=\"pagination\">\n                                        <li class=\"page-item\">\n                                        <button class=\"page-link btn-paginat\"  @click=\"prevPage\" :disabled=\"currentPage === 1\" >Previous</button>\n                                        </li>\n                                        <li class=\"page-item active\" aria-current=\"page\">\n                                            <a class=\"page-link\">{{ currentPage }}</a>\n                                        </li>\n                                        <li class=\"page-item\">\n                                        <button class=\"page-link btn-paginat\"  @click=\"nextPage\" :disabled=\"currentPage === totalPages\">Next</button>\n                                        </li>\n                                    </ul>\n                                </nav>\n                    </div>\n                    <div class=\"div-blank\" v-else>\n                        <div class=\"not-found-img mt-3\" style=\"width: 20%; height: 150px;\" >\n                        </div>\n                        <h6 class=\"mt-3\">No Records...</h6>\n                    </div>\n                </div>\n            </div>\n\n\n            <!-----modal for view record details-->\n            <div class=\"modal fade\" id=\"viewMyRec\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\n                    <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"exampleModalLabel\">View details</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" @click=\"clear_modal\"></button>\n                    </div>\n                    <form >\n                            <div class=\"modal-body\">\n                                <div class=\"mb-3\">\n                                    <label for=\"rec_id\" class=\"col-form-label\">ID</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"rec_id\" v-model=\"view.ID\"  placeholder=\"\" disabled>\n                                </div>\n                                <div class=\"mb-3\">\n                                    <label for=\"date_id\" class=\"col-form-label\">Date</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"dats_id\" v-model=\"view.date\"  placeholder=\"\" disabled>\n                                </div>\n                                <div class=\"mb-3\">\n                                    <label for=\"arr_id\" class=\"col-form-label\">Arrival Time</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"arr_id\" v-model=\"view.arrivalTime\"  placeholder=\"\" disabled>\n                                </div>\n                                <div class=\"mb-3\">\n                                    <label for=\"dep_id\" class=\"col-form-label\">Departure Time</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"dep_id\" v-model=\"view.departureTime\"  placeholder=\"\" disabled>\n                                </div>\n                                <div class=\"mb-3\">\n                                    <label for=\"created\" class=\"col-form-label\">Created At</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"creates\" v-model=\"view.createdAt\"  placeholder=\"\" disabled>\n                                </div>\n                                \n\n\n                                \n                            </div>\n                            <div class=\"modal-footer\">\n                                <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" @click=\"clear_modal\">Close</button>\n                               \n                            </div>\n                    </form>\n                    </div>\n             </div>\n\n        \n            </div>\n  \n</template>\n\n<script>\nimport { CountUp } from 'countup.js'\nimport { makeRequest } from '@/axios';\nexport default {\n    name:'MyRecords',\n    data(){\n        return{\n            count:0,\n            numrecords:0,\n            numdays:0,\n            today:true,\n            myrecords:[],\n            view:[],\n            itemsPerPage:5,\n            currentPage:1,\n        }\n    },\n    methods:{\n        view_record(record,index){\n            const info = {...record}\n            info.ID=index+1\n            this.view = info\n\n        },\n        clear_modal(){\n            this.view=[]\n\n        },\n        nextPage(){\n            this.currentPage++;\n\n        },\n        prevPage(){\n            this.currentPage--;\n        },\n        async fetch_myrecords_animate(){ \n            try{\n                    const num= await makeRequest.get('/records/myrecords/'+this.get_user_id);\n                    //console.log(num.data)\n                    const options = {\n                    duration: 3, \n                    separator: ',',\n                    };\n                    const numRecordsCountUp = new CountUp('numrecords',num.data, this.numrecords,options); \n                    numRecordsCountUp.start(); \n                    this.numrecords=num.data\n                }\n                catch(error){\n                        console.log(error)\n\n                }\n\n\n        },\n        async check_present_today(){\n            try{\n                const status = await makeRequest.get('/records/presentToday/'+this.get_user_id);\n                if(status.data.Error){\n                    this.$toast.error(\"could not get presence status\")\n                }else{\n                    this.today = status.data\n                }\n\n            }\n            catch(error){\n                console.log(error)\n                this.$toast.error(\"could not check presence status\")\n            }\n        },\n        async get_month_presence(){\n            try{\n                const month = await makeRequest.get('/records/getMonthPresence/'+this.get_user_id)\n                if(month.data.Error){\n                    this.$toast.error(\"could not get monthly presence\")\n                }else{\n                    const options = {\n                    duration: 3, \n                    separator: ',',\n                    };\n                    const numdaysCountUp = new CountUp('numdays',month.data, this.numdays,options); \n                    numdaysCountUp.start(); \n                    this.numdays=month.data\n                }\n\n            }\n            catch(error){\n                console.log(error)\n                this.$toast.error(\"could not get monthly prence status\")\n\n            }\n\n        },\n        fetch_my_records(){\n            makeRequest.get('/records/my/'+this.get_user_id)\n            .then(result=>{\n                if(!result.data.Error){\n                    this.myrecords = result.data;\n                    console.log(result.data)\n\n                }else{\n                    this.$toast.error(result.data.Error)\n                }\n\n            })\n            .catch(error=>{\n                console.log(error);\n                this.$toast.error('Something went wrong')\n            })\n        }\n\n\n    },\n    mounted(){\n        this.fetch_myrecords_animate();\n        this.check_present_today();\n        this.get_month_presence()\n        this.fetch_my_records();\n        // this.checK_present()\n        // this.count_days_present()\n        // // const options = {\n        // duration: 3, \n        // separator: ',',\n        // };\n        // const numRecordsCountUp = new CountUp('numrecords', this.numrecords,options); \n        // numRecordsCountUp.start(); \n\n        // const numDaysCountUp = new CountUp('numdays',this.numdays,options); \n        // numDaysCountUp.start(); \n\n        \n\n\n\n    },\n    computed:{\n       get_user_id(){\n        return this.$store.state.user_id;\n       },\n       totalPages(){\n            return Math.ceil(this.myrecords.length/this.itemsPerPage)\n        },\n        paginatedRecords(){\n            const startIndex = (this.currentPage-1)*this.itemsPerPage;\n            const endIndex = startIndex+this.itemsPerPage\n            return this.myrecords.slice(startIndex,endIndex)\n\n        },\n\n    }\n\n}\n</script>\n\n<style>\n#search{\n    width: 45%;\n    border-radius: 17px;\n}\n\n@media screen and (max-width: 610px) {\n    .custom{\n        display: flex;\n        flex-direction: column;\n    }\n    .column #search{\n        margin-top: 2px;\n        margin-bottom: 2px;\n        width:80%;\n    }\n    .column div button{\n        margin-top: 3px;\n\n    }\n\n    \n}\n.div-blank{\n    display: flex;\n    width: 100%;\n    justify-content: center;\n    align-content: center;\n    align-items: center;\n    flex-direction: column;\n}\n.not-found-img{\n    \n    height: 200px;\n    align-content: center;\n    justify-content: center;\n    background-image: url('../../assets/blank.svg');\n    background-size: cover;\n    background-position: center;\n    margin-right: 10px;\n\n}\n.btn-paginat:disabled{\n    color: black;\n}\n.modal-body label{\n    float: left;\n}\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}